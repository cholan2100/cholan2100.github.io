<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding Density</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style type="text/tailwindcss">
        @tailwind base;
        @tailwind components;
        @tailwind utilities;

        body {
            font-family: 'Inter', sans-serif; /* Use Inter font */
        }
        /* Custom styles for the container simulation */
        .beaker {
            border: 2px solid;
            border-top: none; /* Open top */
            position: relative;
            overflow: hidden; /* Hide overflow for fill */
            border-radius: 0 0 0.5rem 0.5rem; /* Rounded bottom corners */
        }
        .beaker-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            transition: height 0.3s ease-in-out; /* Smooth transition for fill */
            z-index: 1; /* Ensure fill is behind pattern */
        }
        .beaker-pattern {
             position: absolute;
             inset: 0; /* Cover the container */
             display: flex;
             flex-wrap: wrap;
             gap: 2px; /* Adjust gap between elements */
             padding: 3px; /* Padding inside beaker */
             align-content: flex-start; /* Start filling from top */
             overflow: hidden; /* Clip elements */
             z-index: 2; /* Ensure pattern is above fill */
        }
        .beaker-markings {
            position: absolute;
            right: -25px; /* Position markings outside */
            top: 0;
            height: 100%;
            width: 20px;
            font-size: 0.75rem; /* Smaller font for markings */
            display: flex;
            flex-direction: column-reverse; /* Markings from bottom up */
            justify-content: space-between;
            padding-bottom: 5%; /* Align bottom marking */
            z-index: 3; /* Markings above everything */
        }
        .beaker-markings span::before {
            content: "â€” "; /* Add tick marks */
        }
         /* Style buttons */
        .control-button {
            @apply px-4 py-2 bg-blue-500 dark:bg-blue-700 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75 transition duration-150 ease-in-out m-1;
        }
        .material-label {
             @apply text-center font-semibold mt-2 text-gray-700 dark:text-gray-300;
        }
        .mass-label {
            @apply text-center text-sm text-gray-500 dark:text-gray-400;
        }
         /* Ensure dark mode applies correctly */
        :root.dark {
            color-scheme: dark;
        }
        html.dark body {
            @apply bg-gray-900 text-gray-200;
        }
        html:not(.dark) body {
             @apply bg-gray-100 text-gray-800;
        }
        .card {
             @apply bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mb-6;
        }

        /* Specific styles for material patterns */
        .puff-corn-piece {
             @apply bg-yellow-400 dark:bg-yellow-600 rounded-full opacity-80;
        }
         .rice-grain {
             @apply bg-gray-400 dark:bg-gray-500 opacity-90;
             /* transform: rotate(45deg); */ /* Removing fixed rotation for variety */
        }
         .iron-ball {
             @apply bg-gray-600 dark:bg-gray-800 rounded-full opacity-95 border border-gray-700 dark:border-gray-900;
        }

    </style>
     <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="p-8">

    <h1 class="text-3xl font-bold mb-6 text-center text-gray-800 dark:text-gray-100">Understanding Density</h1>

    <div class="card">
        <h2 class="text-2xl font-semibold mb-3 text-gray-700 dark:text-gray-200">What is Density?</h2>
        <p class="text-gray-600 dark:text-gray-300">
            Have you ever wondered why a small pebble sinks in water, but a large log floats? It's because of density!
        </p>
        <p class="mt-2 text-gray-600 dark:text-gray-300">
            Density is a measure of how much "stuff" (mass) is packed into a certain amount of space (volume). If you have two objects of the same size, the denser object will feel heavier.
        </p>
    </div>

    <div class="card">
        <h2 class="text-2xl font-semibold mb-3 text-gray-700 dark:text-gray-200">Simulation 1: What is Volume?</h2>
        <p class="mb-4 text-gray-600 dark:text-gray-300">Volume is the amount of space something takes up. Let's visualize it with a container. You can change the size (volume) of this container.</p>
        <div class="flex flex-col items-center">
            <div id="volume-container" class="beaker border-gray-400 dark:border-gray-500 w-24 h-32 relative mb-4">
                <div id="volume-fill" class="beaker-fill bg-blue-300 dark:bg-blue-600 opacity-70" style="height: 100%;"></div>
                <div class="beaker-markings text-gray-500 dark:text-gray-400">
                     <span id="mark-max">300mL</span>
                     <span>200mL</span>
                     <span>100mL</span>
                </div>
            </div>
            <p class="font-semibold text-lg mb-3 text-gray-700 dark:text-gray-200">Current Volume: <span id="volume-label">100</span> mL</p>
            <div>
                <button class="control-button" onclick="setVolume(100)">Set 100 mL</button>
                <button class="control-button" onclick="setVolume(200)">Set 200 mL</button>
                <button class="control-button" onclick="setVolume(300)">Set 300 mL</button>
            </div>
        </div>
    </div>

    <div class="card">
        <h2 class="text-2xl font-semibold mb-3 text-gray-700 dark:text-gray-200">Simulation 2: Same Volume, Different Mass</h2>
        <p class="mb-4 text-gray-600 dark:text-gray-300">Now, let's fill containers of the <span class="font-bold">same volume</span> (set above) with different materials. Notice how their weights (masses) differ!</p>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 text-center">
            <div>
                <div class="flex justify-center">
                    <div id="sim2-container-corn" class="beaker border-gray-400 dark:border-gray-500 w-24 h-32 relative">
                        <div id="sim2-fill-corn" class="beaker-fill bg-yellow-100 dark:bg-yellow-800 opacity-50" style="height: 100%;"></div>
                         <div class="beaker-pattern">
                            <script>
                                for(let i=0; i<150; i++) { // Number of elements
                                    const size = Math.random() > 0.5 ? 'w-1.5 h-1.5' : 'w-2 h-2'; // Vary size slightly
                                    document.write(`<div class="puff-corn-piece ${size}"></div>`);
                                }
                            </script>
                        </div>
                    </div>
                </div>
                <p class="material-label">Puff Corn</p>
                <p class="mass-label">Mass: <span id="mass-corn">10</span> g</p>
            </div>
            <div>
                 <div class="flex justify-center">
                    <div id="sim2-container-rice" class="beaker border-gray-400 dark:border-gray-500 w-24 h-32 relative">
                        <div id="sim2-fill-rice" class="beaker-fill bg-gray-200 dark:bg-gray-600 opacity-50" style="height: 100%;"></div>
                         <div class="beaker-pattern" style="gap: 1px; padding: 1px;"> <script>
                                for(let i=0; i<600; i++) { // *** INCREASED number of elements ***
                                     const rotation = Math.random() > 0.6 ? 'rotate-45' : (Math.random() > 0.3 ? '-rotate-45' : ''); // More rotation variety
                                    document.write(`<div class="rice-grain w-px h-1.5 ${rotation}"></div>`);
                                }
                            </script>
                         </div>
                    </div>
                </div>
                <p class="material-label">Rice</p>
                <p class="mass-label">Mass: <span id="mass-rice">100</span> g</p>
            </div>
            <div>
                 <div class="flex justify-center">
                    <div id="sim2-container-iron" class="beaker border-gray-400 dark:border-gray-500 w-24 h-32 relative">
                        <div id="sim2-fill-iron" class="beaker-fill bg-gray-400 dark:bg-gray-700 opacity-50" style="height: 100%;"></div>
                         <div class="beaker-pattern" style="gap: 3px;"> <script>
                                for(let i=0; i<80; i++) { // Number of elements
                                    document.write(`<div class="iron-ball w-2.5 h-2.5"></div>`);
                                }
                            </script>
                         </div>
                    </div>
                </div>
                <p class="material-label">Iron Balls</p>
                <p class="mass-label">Mass: <span id="mass-iron">500</span> g</p>
            </div>
        </div>
        <p class="mt-4 text-center text-gray-600 dark:text-gray-300">
            Even though the volume is the same, the iron balls have the most mass, making them the densest. Puff corn has the least mass, making it the least dense.
        </p>
    </div>

     <div class="card">
        <h2 class="text-2xl font-semibold mb-3 text-gray-700 dark:text-gray-200">Simulation 3: How Packing Affects Density</h2>
        <p class="mb-4 text-gray-600 dark:text-gray-300">Sometimes, even the same material can seem to have different densities depending on its form. Compare iron balls with iron filings (tiny pieces of iron).</p>
         <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 text-center">
            <div>
                <div class="flex justify-center">
                    <div id="sim3-container-filings" class="beaker border-gray-400 dark:border-gray-500 w-24 h-32 relative">
                        <div id="sim3-fill-filings" class="beaker-fill bg-gray-600 dark:bg-gray-800" style="height: 100%; z-index: 1;"></div>
                         </div>
                </div>
                <p class="material-label">Iron Filings</p>
                <p class="mass-label">Mass: <span id="mass-filings">1000</span> g</p>
            </div>
            <div>
                 <div class="flex justify-center">
                     <div id="sim3-container-balls" class="beaker border-gray-400 dark:border-gray-500 w-24 h-32 relative">
                        <div id="sim3-fill-balls" class="beaker-fill bg-gray-400 dark:bg-gray-700 opacity-50" style="height: 100%;"></div>
                         <div class="beaker-pattern" style="gap: 3px;">
                             <script>
                                for(let i=0; i<80; i++) {
                                    document.write(`<div class="iron-ball w-2.5 h-2.5"></div>`);
                                }
                            </script>
                         </div>
                    </div>
                </div>
                <p class="material-label">Iron Balls</p>
                <p class="mass-label">Mass: <span id="mass-balls-ref">500</span> g</p>
            </div>
        </div>
        <p class="mt-4 text-gray-600 dark:text-gray-300">
            Notice the iron filings pack together much more tightly than the iron balls in the <span class="font-bold">same volume</span>. There's less empty space between the filings. This means you can fit more mass (more iron) into the container when it's in the form of filings.
        </p>
         <p class="mt-2 text-gray-600 dark:text-gray-300">
            So, while the density of the *material* (iron itself) is constant, the *bulk density* (how much mass fits in a volume including air gaps) is higher for filings than for balls.
        </p>
         <p class="mt-4 text-gray-600 dark:text-gray-400 text-sm">
            (Note: The density of solid iron is about 7.87 g/mL. The values used here are simplified for demonstration.)
        </p>
    </div>

     <div class="card">
        <h2 class="text-2xl font-semibold mb-3 text-gray-700 dark:text-gray-200">The Formula for Density</h2>
        <p class="mb-4 text-gray-600 dark:text-gray-300">We calculate density by dividing the mass of an object by its volume.</p>
        <div class="bg-gray-200 dark:bg-gray-700 p-4 rounded-md text-center">
            <p class="text-lg font-mono text-gray-800 dark:text-gray-100">Density = Mass / Volume</p>
        </div>
        <p class="mt-4 text-gray-600 dark:text-gray-300">
            Using our examples (at 100 mL volume):
            <ul class="list-disc list-inside ml-4 mt-2 text-gray-600 dark:text-gray-400">
                <li>Puff Corn Density = 10 g / 100 mL = 0.1 g/mL</li>
                <li>Rice Density = 100 g / 100 mL = 1 g/mL</li>
                <li>Iron Balls Density = 500 g / 100 mL = 5 g/mL</li>
                <li>Iron Filings (Bulk) Density = 1000 g / 100mL = 10 g/mL</li> </ul>
        </p>
    </div>

    <div class="card">
        <h2 class="text-2xl font-semibold mb-3 text-gray-700 dark:text-gray-200">Key Takeaways</h2>
        <ul class="list-disc list-inside space-y-1 text-gray-600 dark:text-gray-300">
            <li>Density measures how much mass is in a given volume.</li>
            <li>Different materials usually have different densities.</li>
            <li>Denser objects feel heavier for their size.</li>
            <li>The formula is Density = Mass / Volume.</li>
            <li>How tightly a material packs (like filings vs. balls) can affect how much mass fits in a volume.</li>
        </ul>
    </div>

    <script>
        // --- State ---
        let currentVolume = 100; // Initial volume in mL
        const maxVolume = 300; // Max volume for scaling visuals

        // Densities (in g/mL) - simplified for demonstration
        const densities = {
            corn: 0.1,  // 10g / 100mL
            rice: 1.0,  // 100g / 100mL
            ironBalls: 5.0, // 500g / 100mL
            ironFilings: 10.0 // 1000g / 100mL (bulk density)
        };

        // --- DOM Elements ---
        const volumeLabel = document.getElementById('volume-label');
        const volumeContainer = document.getElementById('volume-container');
        const volumeFill = document.getElementById('volume-fill');
        const markMax = document.getElementById('mark-max');

        // Simulation 2 elements
        const sim2Containers = {
            corn: document.getElementById('sim2-container-corn'),
            rice: document.getElementById('sim2-container-rice'),
            iron: document.getElementById('sim2-container-iron')
        };
        const massLabels = {
            corn: document.getElementById('mass-corn'),
            rice: document.getElementById('mass-rice'),
            iron: document.getElementById('mass-iron')
        };

        // Simulation 3 elements
         const sim3Containers = {
            filings: document.getElementById('sim3-container-filings'),
            balls: document.getElementById('sim3-container-balls') // Reference to the iron balls container in Sim 3
        };
        const massLabelsSim3 = {
            filings: document.getElementById('mass-filings'),
            ballsRef: document.getElementById('mass-balls-ref')
        };


        // --- Functions ---

        /**
         * Updates the visual representation of volume and mass calculations.
         */
        function updateVisuals() {
            // --- Update Simulation 1 ---
            volumeLabel.textContent = currentVolume;

            // Adjust height of the main container visual based on volume
             const baseHeight = 8; // Base height in rem (h-32 = 8rem)
             const scaleFactor = currentVolume / 100; // 1 for 100mL, 2 for 200mL, 3 for 300mL
             const newHeight = baseHeight * (0.8 + scaleFactor * 0.133);
             volumeContainer.style.height = `${newHeight}rem`;
             markMax.textContent = `${maxVolume}mL`;


            // --- Update Simulation 2 ---
            const massCorn = (densities.corn * currentVolume).toFixed(1);
            const massRice = (densities.rice * currentVolume).toFixed(0);
            const massIron = (densities.ironBalls * currentVolume).toFixed(0);

            massLabels.corn.textContent = massCorn;
            massLabels.rice.textContent = massRice;
            massLabels.iron.textContent = massIron;

             // Update container heights in Sim 2 to match Sim 1
            Object.values(sim2Containers).forEach(container => {
                container.style.height = `${newHeight}rem`;
            });


            // --- Update Simulation 3 ---
            const massFilings = (densities.ironFilings * currentVolume).toFixed(0);
            const massBallsRef = (densities.ironBalls * currentVolume).toFixed(0); // Same as Sim 2

            massLabelsSim3.filings.textContent = massFilings;
            massLabelsSim3.ballsRef.textContent = massBallsRef;

             // Update container heights in Sim 3 to match Sim 1
             Object.values(sim3Containers).forEach(container => {
                container.style.height = `${newHeight}rem`;
            });
        }

        /**
         * Sets the current volume and updates the visuals.
         * @param {number} newVolume - The new volume in mL.
         */
        function setVolume(newVolume) {
            currentVolume = newVolume;
            updateVisuals();
        }

        /**
         * Applies the system theme (light/dark).
         */
        function applyTheme() {
             if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
               document.documentElement.classList.add('dark')
             } else {
               document.documentElement.classList.remove('dark')
             }
        }

        // --- Initialization ---
        // Apply theme on load
        applyTheme();
        // Set initial state
        setVolume(100);

        // --- Event Listeners ---
        // Listen for changes in the system theme preference
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', applyTheme);

    </script>

</body>
</html>
